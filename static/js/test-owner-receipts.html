<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Owner Receipts JavaScript</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Test Owner Receipts JavaScript</h1>
        
        <!-- CSRF Token -->
        <input type="hidden" name="csrfmiddlewaretoken" value="test-token">
        
        <!-- Test Alert -->
        <div class="mb-3">
            <button class="btn btn-primary" onclick="OwnerReceipts.showAlert('success', 'Test success message')">
                Test Success Alert
            </button>
            <button class="btn btn-warning" onclick="OwnerReceipts.showAlert('warning', 'Test warning message')">
                Test Warning Alert
            </button>
            <button class="btn btn-danger" onclick="OwnerReceipts.showAlert('danger', 'Test error message')">
                Test Error Alert
            </button>
        </div>
        
        <!-- Test Resend Button -->
        <div class="mb-3">
            <button type="button" class="btn btn-info" 
                    data-action="resend" 
                    data-receipt-id="123"
                    title="Test resend functionality">
                <i class="bi bi-envelope"></i> Test Resend
            </button>
        </div>
        
        <!-- Test PDF Download -->
        <div class="mb-3">
            <a href="/accounting/owner-receipt/123/pdf/" class="btn btn-success">
                <i class="bi bi-file-earmark-pdf"></i> Test PDF Download
            </a>
        </div>
        
        <!-- Test Form -->
        <form id="generateReceiptForm" class="mb-3">
            <input type="hidden" name="csrfmiddlewaretoken" value="test-token">
            <input type="checkbox" name="send_email" checked> Send Email
            <button type="submit" class="btn btn-success">Test Generate Receipt</button>
        </form>
        
        <!-- Test Filter Form -->
        <form id="filterForm" class="mb-3">
            <input type="text" name="q" placeholder="Search...">
            <button type="submit" class="btn btn-primary">Test Filter</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="owner-receipts.js"></script>
    
    <script>
        // Override fetch for testing
        window.fetch = function(url, options) {
            console.log('Mock fetch called:', url, options);
            return Promise.resolve({
                ok: true,
                json: () => Promise.resolve({
                    success: true,
                    message: 'Mock success response'
                })
            });
        };
        
        console.log('Test page loaded. OwnerReceipts object:', OwnerReceipts);
    </script>
</body>
</html>